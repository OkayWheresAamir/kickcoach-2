<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KickCoach â€” Your Personal Football Coach</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
    <style>
      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
      :root {
        --bg: #070a0f; --surface: #0e1219; --surface2: #131720;
        --border: #1c2230; --border-hi: #2a3347;
        --text: #edf0f7; --muted: #4e5a72;
        --accent: #00e5a0; --accent-dim: rgba(0,229,160,0.08);
        --good: #00e5a0; --moderate: #ffb800; --significant: #ff4757; --unavailable: #4e5a72;
        --font-display: 'Bebas Neue', sans-serif;
        --font-body: 'Plus Jakarta Sans', sans-serif;
        --font-mono: 'JetBrains Mono', monospace;
        --radius: 12px; --radius-sm: 8px;
      }
      html { scroll-behavior: smooth; }
      body { background: var(--bg); color: var(--text); font-family: var(--font-body); font-size: 15px; line-height: 1.6; min-height: 100vh; overflow-x: hidden; }
      body::before { content:''; position:fixed; inset:0; background: radial-gradient(ellipse 60% 40% at 20% 10%, rgba(0,229,160,0.06) 0%, transparent 60%), radial-gradient(ellipse 40% 30% at 80% 80%, rgba(255,107,53,0.04) 0%, transparent 50%); pointer-events:none; z-index:0; }
      .pitch-lines { position:fixed; top:0; right:0; width:340px; height:340px; opacity:0.035; pointer-events:none; z-index:0; }
      .page { position:relative; z-index:1; max-width:900px; margin:0 auto; padding:0 20px 80px; }

      /* NAV */
      nav { display:flex; align-items:center; justify-content:space-between; padding:22px 0 0; margin-bottom:48px; }
      .nav-logo { display:flex; align-items:center; gap:10px; text-decoration:none; }
      .nav-ball { width:36px; height:36px; background:var(--accent); border-radius:50%; display:grid; place-items:center; flex-shrink:0; }
      .nav-ball svg { width:20px; height:20px; }
      .nav-wordmark { font-family:var(--font-display); font-size:1.6rem; letter-spacing:0.04em; color:var(--text); line-height:1; }
      .nav-wordmark span { color:var(--accent); }
      .nav-right { display:flex; gap:10px; align-items:center; }
      .nav-badge { font-family:var(--font-mono); font-size:10px; padding:4px 10px; border:1px solid var(--border-hi); border-radius:20px; color:var(--muted); letter-spacing:0.06em; }
      .history-btn { font-family:var(--font-mono); font-size:10px; padding:4px 12px; border:1px solid var(--border-hi); border-radius:20px; color:var(--muted); background:none; cursor:pointer; transition:color 0.2s, border-color 0.2s; letter-spacing:0.06em; }
      .history-btn:hover { color:var(--accent); border-color:var(--accent); }

      /* HERO */
      .hero { margin-bottom:40px; animation:heroIn 0.7s ease both; }
      @keyframes heroIn { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }
      .hero-tag { display:inline-flex; align-items:center; gap:6px; font-size:11px; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; color:var(--accent); margin-bottom:16px; }
      .hero-tag-dot { width:6px; height:6px; background:var(--accent); border-radius:50%; animation:blink 1.8s ease infinite; }
      @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
      .hero h1 { font-family:var(--font-display); font-size:clamp(3rem,9vw,5.5rem); line-height:0.92; letter-spacing:0.02em; text-transform:uppercase; margin-bottom:20px; }
      .hero h1 .hl { color:var(--accent); }
      .hero-sub { font-size:16px; color:var(--muted); max-width:520px; line-height:1.65; }

      /* STEPS */
      .steps { display:flex; gap:0; margin-bottom:32px; animation:heroIn 0.7s 0.15s ease both; }
      .step { flex:1; display:flex; align-items:center; gap:8px; padding:12px 0; border-bottom:2px solid var(--border); transition:border-color 0.3s; }
      .step.active { border-bottom-color:var(--accent); }
      .step-num { width:26px; height:26px; border-radius:50%; border:1.5px solid var(--border-hi); display:grid; place-items:center; font-family:var(--font-mono); font-size:10px; color:var(--muted); flex-shrink:0; transition:all 0.3s; }
      .step.active .step-num { border-color:var(--accent); color:var(--accent); background:var(--accent-dim); }
      .step.done .step-num { background:var(--accent); border-color:var(--accent); color:#070a0f; }
      .step-text { font-size:11px; font-weight:600; letter-spacing:0.05em; text-transform:uppercase; color:var(--muted); transition:color 0.3s; }
      .step.active .step-text { color:var(--text); }
      .step.done .step-text { color:var(--accent); }
      .step-arrow { font-size:14px; color:var(--border-hi); padding:0 4px; flex-shrink:0; }

      /* PROFILE CARD */
      .profile-card { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:24px; margin-bottom:16px; animation:heroIn 0.7s 0.1s ease both; }
      .profile-card-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:18px; cursor:pointer; user-select:none; }
      .profile-card-title { font-family:var(--font-display); font-size:1.1rem; letter-spacing:0.06em; text-transform:uppercase; display:flex; align-items:center; gap:10px; }
      .profile-card-title .badge { font-family:var(--font-mono); font-size:9px; padding:2px 8px; border:1px solid rgba(0,229,160,0.3); border-radius:20px; color:var(--accent); letter-spacing:0.06em; }
      .profile-chevron { color:var(--muted); transition:transform 0.25s; }
      .profile-card.collapsed .profile-chevron { transform:rotate(-90deg); }
      .profile-card.collapsed .profile-fields,
      .profile-card.collapsed .profile-hint { display:none !important; }
      .profile-fields { display:grid; grid-template-columns:repeat(auto-fill,minmax(190px,1fr)); gap:14px; }
      .profile-field label { display:block; font-size:10px; font-weight:600; letter-spacing:0.08em; text-transform:uppercase; color:var(--muted); margin-bottom:6px; }
      .profile-field select, .profile-field input[type="number"], .profile-field input[type="text"] { width:100%; background:var(--bg); border:1px solid var(--border-hi); border-radius:var(--radius-sm); padding:9px 12px; color:var(--text); font-family:var(--font-body); font-size:13.5px; outline:none; transition:border-color 0.2s; appearance:none; -webkit-appearance:none; }
      .profile-field select:focus, .profile-field input:focus { border-color:var(--accent); }
      .select-wrap { position:relative; }
      .select-wrap::after { content:'â–¾'; position:absolute; right:12px; top:50%; transform:translateY(-50%); color:var(--muted); pointer-events:none; font-size:11px; }
      .profile-field input[type="number"]::-webkit-outer-spin-button,
      .profile-field input[type="number"]::-webkit-inner-spin-button { -webkit-appearance:none; }
      .profile-hint { margin-top:14px; padding:10px 14px; background:var(--accent-dim); border-radius:8px; font-size:12.5px; color:var(--accent); display:none; align-items:center; gap:8px; }

      /* UPLOAD */
      .upload-section { animation:heroIn 0.7s 0.25s ease both; }
      .upload-card { position:relative; background:var(--surface); border:2px dashed var(--border-hi); border-radius:16px; padding:48px 32px 40px; text-align:center; cursor:pointer; transition:border-color 0.25s, background 0.25s, transform 0.2s; overflow:hidden; }
      .upload-card::before { content:''; position:absolute; inset:0; background:radial-gradient(ellipse 50% 60% at 50% 100%, rgba(0,229,160,0.04) 0%, transparent 70%); transition:opacity 0.3s; opacity:0; }
      .upload-card:hover::before, .upload-card.drag-over::before { opacity:1; }
      .upload-card.drag-over { border-color:var(--accent); background:#0b1210; transform:scale(1.005); }
      .upload-card:hover { border-color:#354060; }
      .upload-card input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; width:100%; height:100%; }
      .upload-icon-wrap { position:relative; display:inline-flex; margin-bottom:20px; }
      .upload-ring { width:80px; height:80px; border-radius:50%; border:1.5px solid var(--border-hi); display:flex; align-items:center; justify-content:center; background:var(--surface2); transition:border-color 0.2s, background 0.2s; }
      .upload-card:hover .upload-ring, .upload-card.drag-over .upload-ring { border-color:var(--accent); background:var(--accent-dim); }
      .upload-ring svg { width:30px; height:30px; stroke:var(--muted); transition:stroke 0.2s; }
      .upload-card:hover .upload-ring svg, .upload-card.drag-over .upload-ring svg { stroke:var(--accent); }
      .upload-ping { position:absolute; inset:-6px; border-radius:50%; border:1px solid var(--accent); opacity:0; animation:ping 2s ease infinite; }
      @keyframes ping { 0%{transform:scale(0.85);opacity:0} 40%{opacity:0.3} 100%{transform:scale(1.15);opacity:0} }
      .upload-title { font-family:var(--font-display); font-size:clamp(1.4rem,3vw,1.9rem); letter-spacing:0.06em; text-transform:uppercase; margin-bottom:8px; }
      .upload-hint { color:var(--muted); font-size:13px; }
      .file-name { margin-top:16px; display:none; align-items:center; justify-content:center; gap:8px; font-family:var(--font-mono); font-size:12px; color:var(--accent); background:var(--accent-dim); border:1px solid rgba(0,229,160,0.2); border-radius:6px; padding:8px 14px; }

      /* DEV */
      .dev-panel { margin-bottom:14px; }
      .dev-toggle { display:flex; align-items:center; gap:6px; background:none; border:none; color:var(--muted); font-family:var(--font-mono); font-size:11px; cursor:pointer; padding:0; letter-spacing:0.04em; transition:color 0.2s; }
      .dev-toggle:hover { color:var(--text); }
      .dev-toggle-icon { transition:transform 0.2s; }
      .dev-toggle.open .dev-toggle-icon { transform:rotate(90deg); }
      .dev-body { display:none; margin-top:10px; padding:14px; background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-sm); }
      .dev-body.open { display:block; }
      .dev-body label { font-size:11px; text-transform:uppercase; letter-spacing:0.06em; color:var(--muted); display:block; margin-bottom:6px; }
      .dev-body input { width:100%; background:var(--bg); border:1px solid var(--border-hi); border-radius:6px; padding:8px 12px; color:var(--text); font-family:var(--font-mono); font-size:12px; outline:none; transition:border-color 0.2s; }
      .dev-body input:focus { border-color:var(--accent); }

      /* SUBMIT */
      .submit-btn { width:100%; padding:17px; background:var(--accent); color:#070a0f; border:none; border-radius:var(--radius); font-family:var(--font-display); font-size:1.25rem; font-weight:700; letter-spacing:0.1em; text-transform:uppercase; cursor:pointer; transition:opacity 0.2s, transform 0.15s, box-shadow 0.2s; display:flex; align-items:center; justify-content:center; gap:10px; margin-top:14px; }
      .submit-btn:hover:not(:disabled) { opacity:0.9; transform:translateY(-2px); box-shadow:0 8px 30px rgba(0,229,160,0.2); }
      .submit-btn:disabled { opacity:0.3; cursor:not-allowed; transform:none; }
      .spinner { width:18px; height:18px; border:2.5px solid rgba(7,10,15,0.3); border-top-color:#070a0f; border-radius:50%; animation:spin 0.7s linear infinite; display:none; }
      @keyframes spin { to{transform:rotate(360deg)} }
      #status-bar { margin-top:12px; font-family:var(--font-mono); font-size:11.5px; color:var(--muted); min-height:18px; text-align:center; transition:color 0.3s; }
      #status-bar.error { color:var(--significant); }
      #status-bar.success { color:var(--accent); }

      /* LOADING */
      .loading-state { display:none; padding:60px 20px; text-align:center; animation:fadeIn 0.4s ease; }
      .loading-state.show { display:block; }
      .loading-ball { width:56px; height:56px; margin:0 auto 20px; background:var(--accent); border-radius:50%; animation:bounce 0.8s ease infinite alternate; }
      @keyframes bounce { from{transform:translateY(0) scale(1)} to{transform:translateY(-16px) scale(0.92)} }
      .loading-text { font-family:var(--font-display); font-size:1.4rem; letter-spacing:0.06em; text-transform:uppercase; margin-bottom:8px; }
      .loading-sub { color:var(--muted); font-size:13px; }

      /* RESULTS */
      #results { margin-top:48px; display:none; }
      .section-label { font-family:var(--font-mono); font-size:10px; font-weight:500; letter-spacing:0.14em; text-transform:uppercase; color:var(--muted); margin-bottom:14px; display:flex; align-items:center; gap:10px; }
      .section-label::after { content:''; flex:1; height:1px; background:var(--border); }

      /* PROFILE BANNER */
      .profile-used-banner { display:flex; align-items:center; gap:12px; padding:12px 18px; background:var(--accent-dim); border:1px solid rgba(0,229,160,0.2); border-radius:var(--radius-sm); margin-bottom:20px; font-size:13px; animation:fadeUp 0.4s ease both; }
      .pu-icon { font-size:18px; }
      .profile-used-label { font-weight:600; color:var(--accent); font-size:12px; letter-spacing:0.05em; text-transform:uppercase; }
      .profile-used-desc { color:var(--muted); font-size:12px; }

      /* RATING HERO */
      .rating-hero { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:32px; margin-bottom:20px; display:grid; grid-template-columns:auto 1fr; gap:28px; align-items:center; animation:fadeUp 0.4s ease both; overflow:hidden; position:relative; }
      .rating-hero::before { content:''; position:absolute; top:0; right:0; width:200px; height:200px; background:radial-gradient(circle at top right, rgba(0,229,160,0.06) 0%, transparent 60%); pointer-events:none; }
      .rating-circle-wrap { position:relative; width:90px; height:90px; flex-shrink:0; }
      .rating-circle { width:90px; height:90px; border-radius:50%; background:conic-gradient(var(--accent) calc(var(--pct) * 1%), var(--border) 0); display:grid; place-items:center; }
      .rating-inner { width:68px; height:68px; border-radius:50%; background:var(--surface); display:grid; place-items:center; flex-direction:column; }
      .rating-num { font-family:var(--font-display); font-size:2rem; color:var(--accent); line-height:1; }
      .rating-denom { font-family:var(--font-mono); font-size:9px; color:var(--muted); }
      .rating-text h2 { font-family:var(--font-display); font-size:clamp(1.3rem,3vw,1.7rem); text-transform:uppercase; letter-spacing:0.04em; margin-bottom:8px; line-height:1.1; }
      .rating-text p { color:var(--muted); font-size:14px; line-height:1.6; }
      .pro-tip { margin-top:14px; padding:12px 16px; border-left:3px solid var(--accent); background:var(--accent-dim); border-radius:0 8px 8px 0; font-size:13px; color:var(--text); font-style:italic; line-height:1.5; }
      .next-focus { margin-top:10px; padding:10px 14px; border-left:3px solid var(--moderate); background:rgba(255,184,0,0.06); border-radius:0 8px 8px 0; font-size:13px; color:var(--text); display:flex; align-items:flex-start; gap:8px; }
      .next-focus-label { font-weight:700; color:var(--moderate); white-space:nowrap; font-size:10px; letter-spacing:0.05em; text-transform:uppercase; margin-top:3px; }
      .frame-badge { display:inline-flex; align-items:center; gap:5px; font-family:var(--font-mono); font-size:10px; color:var(--muted); padding:3px 10px; border:1px solid var(--border); border-radius:20px; margin-bottom:20px; }

      /* DEV GRID */
      .dev-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(195px,1fr)); gap:10px; margin-bottom:20px; }
      .dev-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:16px; position:relative; overflow:hidden; transition:border-color 0.2s, transform 0.15s; animation:fadeUp 0.4s ease both; cursor:help; }
      .dev-card:hover { transform:translateY(-2px); border-color:var(--border-hi); }
      .dev-card-accent { position:absolute; top:0; left:0; right:0; height:2px; }
      .dev-card.good .dev-card-accent { background:var(--good); }
      .dev-card.moderate .dev-card-accent { background:var(--moderate); }
      .dev-card.significant .dev-card-accent { background:var(--significant); }
      .dev-card.unavailable .dev-card-accent { background:var(--muted); }
      .dev-label { font-size:11px; letter-spacing:0.05em; text-transform:uppercase; color:var(--muted); margin-bottom:8px; padding-top:2px; }
      .dev-values { display:flex; align-items:baseline; gap:5px; margin-bottom:6px; }
      .dev-user { font-family:var(--font-display); font-size:1.7rem; line-height:1; }
      .dev-unit { font-family:var(--font-mono); font-size:10px; color:var(--muted); }
      .dev-pro-row { font-family:var(--font-mono); font-size:10.5px; color:var(--muted); margin-bottom:6px; }
      .dev-badge { display:inline-block; padding:2px 8px; border-radius:20px; font-size:9.5px; font-weight:600; letter-spacing:0.05em; text-transform:uppercase; }
      .badge-good { background:rgba(0,229,160,0.1); color:var(--good); }
      .badge-moderate { background:rgba(255,184,0,0.1); color:var(--moderate); }
      .badge-significant { background:rgba(255,71,87,0.1); color:var(--significant); }
      .badge-unavailable { background:rgba(78,90,114,0.1); color:var(--unavailable); }
      .dev-diff { font-family:var(--font-mono); font-size:10px; margin-top:4px; }
      .diff-above { color:var(--moderate); }
      .diff-below { color:var(--significant); }
      .diff-match { color:var(--good); }
      .dev-cue { margin-top:8px; padding:6px 8px; background:rgba(0,229,160,0.04); border-radius:6px; font-size:10px; color:var(--accent); font-style:italic; line-height:1.4; border-left:2px solid rgba(0,229,160,0.3); }

      /* TWO COL */
      .two-col { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:20px; }
      @media (max-width:560px) { .two-col { grid-template-columns:1fr; } }
      .list-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px; animation:fadeUp 0.4s ease both; }
      .list-card h3 { font-family:var(--font-display); font-size:1.05rem; text-transform:uppercase; letter-spacing:0.08em; margin-bottom:14px; display:flex; align-items:center; gap:8px; }
      .h3-icon { width:22px; height:22px; border-radius:50%; display:grid; place-items:center; font-size:10px; flex-shrink:0; }
      .h3-icon.good { background:rgba(0,229,160,0.12); }
      .h3-icon.significant { background:rgba(255,71,87,0.12); }
      .list-card ul { list-style:none; }
      .list-card li { font-size:13px; padding:10px 0; border-bottom:1px solid var(--border); color:var(--muted); display:flex; gap:10px; align-items:flex-start; line-height:1.45; }
      .list-card li:last-child { border-bottom:none; }
      .li-dot { width:4px; height:4px; border-radius:50%; background:var(--border-hi); flex-shrink:0; margin-top:7px; }
      .improve-sev { font-size:9px; font-weight:600; letter-spacing:0.05em; text-transform:uppercase; padding:2px 7px; border-radius:10px; flex-shrink:0; margin-top:1px; }
      .improve-cue { margin-top:6px; padding:5px 8px; background:rgba(255,71,87,0.05); border-radius:5px; font-size:11px; color:var(--text); font-style:italic; border-left:2px solid rgba(255,71,87,0.25); }

      /* DRILLS */
      .drills-list { display:flex; flex-direction:column; gap:12px; margin-bottom:32px; }
      .drill-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px 22px; display:grid; grid-template-columns:48px 1fr; gap:16px; align-items:start; transition:border-color 0.2s, transform 0.15s; animation:fadeUp 0.4s ease both; }
      .drill-card:hover { border-color:var(--border-hi); transform:translateX(4px); }
      .drill-num { font-family:var(--font-display); font-size:2.5rem; color:var(--border-hi); line-height:1; }
      .drill-body h4 { font-family:var(--font-display); font-size:1.1rem; text-transform:uppercase; letter-spacing:0.05em; margin-bottom:5px; line-height:1.1; }
      .drill-body p { font-size:13px; color:var(--muted); line-height:1.5; }
      .drill-meta { display:flex; align-items:center; gap:10px; margin-top:10px; flex-wrap:wrap; }
      .drill-tags { display:flex; flex-wrap:wrap; gap:5px; }
      .drill-tag { font-family:var(--font-mono); font-size:9.5px; padding:2px 8px; border:1px solid var(--border-hi); border-radius:20px; color:var(--muted); }
      .drill-reps { font-family:var(--font-mono); font-size:11px; color:var(--accent); white-space:nowrap; }
      .drill-progression { margin-top:8px; font-size:11.5px; color:var(--muted); display:flex; align-items:flex-start; gap:6px; }
      .drill-prog-label { color:var(--moderate); font-weight:600; font-size:10px; text-transform:uppercase; letter-spacing:0.04em; white-space:nowrap; margin-top:1px; }

      /* HISTORY PANEL */
      .history-panel { display:none; position:fixed; top:0; right:0; width:360px; height:100vh; background:var(--surface); border-left:1px solid var(--border); z-index:100; overflow-y:auto; padding:24px; }
      .history-panel.open { display:block; animation:slideIn 0.3s ease both; }
      @keyframes slideIn { from{transform:translateX(100%)} to{transform:translateX(0)} }
      .history-close { display:flex; align-items:center; justify-content:space-between; margin-bottom:20px; }
      .history-title { font-family:var(--font-display); font-size:1.3rem; text-transform:uppercase; letter-spacing:0.06em; }
      .history-close-btn { background:none; border:1px solid var(--border); color:var(--muted); width:30px; height:30px; border-radius:50%; cursor:pointer; font-size:16px; display:grid; place-items:center; transition:all 0.2s; }
      .history-close-btn:hover { border-color:var(--accent); color:var(--accent); }
      .history-session { padding:14px; border:1px solid var(--border); border-radius:var(--radius-sm); margin-bottom:10px; transition:border-color 0.2s; }
      .history-session:hover { border-color:var(--border-hi); }
      .hs-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; }
      .hs-rating { font-family:var(--font-display); font-size:1.6rem; color:var(--accent); }
      .hs-meta { font-family:var(--font-mono); font-size:10px; color:var(--muted); }
      .hs-profile { font-size:11px; color:var(--muted); margin-top:2px; }
      .history-empty { color:var(--muted); font-size:13px; text-align:center; padding:40px 0; line-height:1.8; }

      /* RAW */
      .raw-toggle { background:none; border:1px solid var(--border); color:var(--muted); border-radius:6px; padding:7px 14px; font-family:var(--font-mono); font-size:11px; cursor:pointer; transition:all 0.2s; margin-bottom:10px; }
      .raw-toggle:hover { border-color:var(--border-hi); color:var(--text); }
      pre#raw-output { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:18px; font-family:var(--font-mono); font-size:11.5px; color:var(--muted); overflow-x:auto; white-space:pre-wrap; word-break:break-all; display:none; line-height:1.65; }

      @keyframes fadeUp { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }
      @keyframes fadeIn { from{opacity:0} to{opacity:1} }
      .anim-d1{animation-delay:0.05s} .anim-d2{animation-delay:0.12s} .anim-d3{animation-delay:0.2s} .anim-d4{animation-delay:0.28s}

      .no-kick { background:var(--surface); border:1px dashed var(--border-hi); border-radius:var(--radius); padding:40px; text-align:center; }
      .no-kick h3 { font-family:var(--font-display); font-size:1.4rem; text-transform:uppercase; margin-bottom:8px; }
      .no-kick p { color:var(--muted); font-size:13px; }
      .empty-drills { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:28px; text-align:center; color:var(--muted); font-size:13px; }

      @media (max-width:600px) {
        nav { margin-bottom:32px; }
        .hero { margin-bottom:28px; }
        .upload-card { padding:40px 20px 36px; }
        .rating-hero { grid-template-columns:1fr; text-align:center; }
        .rating-circle-wrap { margin:0 auto; }
        .drill-card { grid-template-columns:38px 1fr; }
        .history-panel { width:100%; }
      }
    </style>
  </head>
  <body>

    <svg class="pitch-lines" viewBox="0 0 340 340" fill="none">
      <circle cx="170" cy="170" r="160" stroke="white" stroke-width="1.5"/>
      <circle cx="170" cy="170" r="30" stroke="white" stroke-width="1.5"/>
      <line x1="10" y1="170" x2="330" y2="170" stroke="white" stroke-width="1.5"/>
      <rect x="10" y="80" width="80" height="180" stroke="white" stroke-width="1.5"/>
      <rect x="250" y="80" width="80" height="180" stroke="white" stroke-width="1.5"/>
    </svg>

    <!-- HISTORY PANEL -->
    <div class="history-panel" id="history-panel">
      <div class="history-close">
        <div class="history-title">Session History</div>
        <button class="history-close-btn" onclick="closeHistory()">Ã—</button>
      </div>
      <div id="history-list"><div class="history-empty">Loadingâ€¦</div></div>
    </div>

    <div class="page">
      <nav>
        <a class="nav-logo" href="#">
          <div class="nav-ball">
            <svg viewBox="0 0 24 24" fill="none" stroke="#070a0f" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 2a10 10 0 0 1 6.5 2.4L12 8 5.5 4.4A10 10 0 0 1 12 2z"/>
              <path d="M2.5 9h5.8l3.7-1 3.7 1h5.8"/>
              <path d="M12 8v4M8.5 10l-1 5.5 4.5 2 4.5-2-1-5.5"/>
            </svg>
          </div>
          <div class="nav-wordmark">Kick<span>Coach</span></div>
        </a>
        <div class="nav-right">
          <button class="history-btn" onclick="openHistory()">ðŸ“‹ History</button>
          <div class="nav-badge">AI POWERED</div>
        </div>
      </nav>

      <div class="hero">
        <div class="hero-tag"><div class="hero-tag-dot"></div>Personalised Biomechanics Coaching</div>
        <h1>Train Like<br>A <span class="hl">Pro.</span></h1>
        <p class="hero-sub">Tell us about yourself, upload your kick, and get AI coaching tailored to <em>your</em> position, age and goals â€” compared to a reference that actually fits you.</p>
      </div>

      <div class="steps" id="steps-row">
        <div class="step active" id="step-1"><div class="step-num">1</div><div class="step-text">Profile</div></div>
        <div class="step-arrow">â€º</div>
        <div class="step" id="step-2"><div class="step-num">2</div><div class="step-text">Upload</div></div>
        <div class="step-arrow">â€º</div>
        <div class="step" id="step-3"><div class="step-num">3</div><div class="step-text">Analyse</div></div>
        <div class="step-arrow">â€º</div>
        <div class="step" id="step-4"><div class="step-num">4</div><div class="step-text">Review</div></div>
      </div>

      <!-- PLAYER PROFILE -->
      <div class="profile-card" id="profile-card">
        <div class="profile-card-header" onclick="toggleProfile()">
          <div class="profile-card-title">
            Your Player Profile
            <span class="badge">Personalises Your Analysis</span>
          </div>
          <svg class="profile-chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="6 9 12 15 18 9"/></svg>
        </div>
        <div class="profile-fields">
          <div class="profile-field">
            <label>Position</label>
            <div class="select-wrap">
              <select id="p-position">
                <option value="">Not specified</option>
                <option value="striker">Striker / Forward</option>
                <option value="winger">Winger</option>
                <option value="midfielder">Midfielder</option>
                <option value="defender">Defender</option>
                <option value="goalkeeper">Goalkeeper</option>
              </select>
            </div>
          </div>
          <div class="profile-field">
            <label>Playing Level</label>
            <div class="select-wrap">
              <select id="p-level">
                <option value="">Not specified</option>
                <option value="recreational">Recreational / Social</option>
                <option value="youth">Youth Academy / School</option>
                <option value="advanced">Amateur / Semi-Pro</option>
                <option value="elite">Elite / Professional</option>
              </select>
            </div>
          </div>
          <div class="profile-field">
            <label>Age</label>
            <input type="number" id="p-age" placeholder="e.g. 17" min="8" max="65"/>
          </div>
          <div class="profile-field">
            <label>Kick Type</label>
            <div class="select-wrap">
              <select id="p-kicktype">
                <option value="">Not specified</option>
                <option value="power">Power Shot</option>
                <option value="finesse">Finesse / Curl</option>
                <option value="pass">Driven Pass</option>
                <option value="long_pass">Long Ball</option>
              </select>
            </div>
          </div>
          <div class="profile-field" style="grid-column:1/-1">
            <label>Your Goal</label>
            <input type="text" id="p-goals" placeholder="e.g. Improve shot power for long-range efforts"/>
          </div>
        </div>
        <div class="profile-hint" id="profile-hint">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <span id="profile-hint-text"></span>
        </div>
      </div>

      <!-- UPLOAD -->
      <div class="upload-section">
        <div class="dev-panel">
          <button class="dev-toggle" id="dev-toggle-btn" onclick="toggleDev()">
            <span class="dev-toggle-icon">â€º</span> Developer settings
          </button>
          <div class="dev-body" id="dev-body">
            <label>API Base URL</label>
            <input type="text" id="api-base" value="http://127.0.0.1:8000/" placeholder="http://127.0.0.1:8000/"/>
          </div>
        </div>

        <div class="upload-card" id="drop-zone">
          <input type="file" id="file-input" accept="video/*"/>
          <div class="upload-icon-wrap">
            <div class="upload-ring">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="16 16 12 12 8 16"/><line x1="12" y1="12" x2="12" y2="21"/>
                <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"/>
              </svg>
            </div>
            <div class="upload-ping"></div>
          </div>
          <div class="upload-title">Drop your kick video</div>
          <p class="upload-hint">MP4, MOV, AVI â€” up to 200 MB</p>
          <div class="file-name" id="file-name">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="20 6 9 17 4 12"/></svg>
            <span id="file-name-text"></span>
          </div>
        </div>

        <button class="submit-btn" id="submit-btn" onclick="submitVideo()" disabled>
          <div class="spinner" id="spinner"></div>
          <span id="btn-label">Analyse My Kick</span>
        </button>
        <div id="status-bar"></div>
      </div>

      <div class="loading-state" id="loading-state">
        <div class="loading-ball"></div>
        <div class="loading-text">Analysing Your Technique</div>
        <p class="loading-sub">Running pose estimation & personalised AI coachingâ€¦</p>
      </div>

      <div id="results"></div>
    </div>

    <script>
      // â”€â”€â”€ PROFILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      let profileCollapsed = false;

      function toggleProfile() {
        profileCollapsed = !profileCollapsed;
        document.getElementById('profile-card').classList.toggle('collapsed', profileCollapsed);
      }

      function toggleDev() {
        const btn = document.getElementById('dev-toggle-btn');
        const body = document.getElementById('dev-body');
        btn.classList.toggle('open');
        body.classList.toggle('open');
      }

      const PROFILE_RULES = [
        { test: (a) => a && a <= 15, label: "ðŸŽ¯ Comparing against Youth Junior (U12â€“U16) benchmarks." },
        { test: (a) => a && a <= 21, label: "ðŸŽ¯ Comparing against Youth Senior (U17â€“U21) benchmarks." },
      ];

      const LEVEL_LABELS = {
        elite:        "ðŸŽ¯ Comparing against Elite Power Striker benchmarks.",
        advanced:     "ðŸŽ¯ Comparing against Advanced Adult Player benchmarks.",
        recreational: "ðŸŽ¯ Comparing against Recreational Adult benchmarks.",
        youth:        "ðŸŽ¯ Comparing against Youth Player benchmarks.",
      };

      function updateProfileHint() {
        const age   = parseInt(document.getElementById('p-age').value) || null;
        const level = document.getElementById('p-level').value;
        const hint  = document.getElementById('profile-hint');
        const txt   = document.getElementById('profile-hint-text');

        for (const rule of PROFILE_RULES) {
          if (rule.test(age)) { txt.textContent = rule.label; hint.style.display = 'flex'; return; }
        }
        if (level && LEVEL_LABELS[level]) {
          txt.textContent = LEVEL_LABELS[level]; hint.style.display = 'flex'; return;
        }
        if (age || level) {
          txt.textContent = "ðŸŽ¯ Comparing against Advanced Adult Player benchmarks.";
          hint.style.display = 'flex';
          return;
        }
        hint.style.display = 'none';
      }

      ['p-age','p-level','p-kicktype'].forEach(id => {
        document.getElementById(id).addEventListener('change', updateProfileHint);
      });
      document.getElementById('p-age').addEventListener('input', updateProfileHint);

      // â”€â”€â”€ FILE INPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      const fileInput   = document.getElementById('file-input');
      const fileNameEl  = document.getElementById('file-name');
      const fileNameTxt = document.getElementById('file-name-text');
      const submitBtn   = document.getElementById('submit-btn');
      const dropZone    = document.getElementById('drop-zone');

      fileInput.addEventListener('change', () => { if (fileInput.files[0]) onFileChosen(fileInput.files[0]); });

      function onFileChosen(f) {
        fileNameTxt.textContent = `${f.name} (${(f.size/1024/1024).toFixed(1)} MB)`;
        fileNameEl.style.display = 'flex';
        submitBtn.disabled = false;
        setStep(2);
      }

      dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
      dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
      dropZone.addEventListener('drop', e => {
        e.preventDefault(); dropZone.classList.remove('drag-over');
        const f = e.dataTransfer.files[0];
        if (f && f.type.startsWith('video/')) { const dt = new DataTransfer(); dt.items.add(f); fileInput.files = dt.files; onFileChosen(f); }
        else setStatus('Please drop a video file.', 'error');
      });

      // â”€â”€â”€ STEPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      function setStep(n) {
        [1,2,3,4].forEach(i => {
          const el = document.getElementById(`step-${i}`);
          if (!el) return;
          el.classList.remove('active','done');
          if (i < n) el.classList.add('done');
          if (i === n) el.classList.add('active');
        });
      }

      function setStatus(msg, type='') { const el = document.getElementById('status-bar'); el.textContent = msg; el.className = type; }

      function setLoading(on) {
        document.getElementById('spinner').style.display = on ? 'block' : 'none';
        document.getElementById('btn-label').textContent = on ? 'Analysingâ€¦' : 'Analyse My Kick';
        submitBtn.disabled = on;
        document.getElementById('loading-state').classList.toggle('show', on);
        document.getElementById('results').style.display = on ? 'none' : '';
      }

      // â”€â”€â”€ SUBMIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      async function submitVideo() {
        const file = fileInput.files[0];
        if (!file) return;

        const base = (document.getElementById('api-base').value || 'http://127.0.0.1:8000/').replace(/\/$/, '');
        const form = new FormData();
        form.append('file', file);

        const age      = document.getElementById('p-age').value.trim();
        const level    = document.getElementById('p-level').value;
        const position = document.getElementById('p-position').value;
        const kicktype = document.getElementById('p-kicktype').value;
        const goals    = document.getElementById('p-goals').value.trim();

        if (age)      form.append('age',      parseInt(age));
        if (level)    form.append('level',    level);
        if (position) form.append('position', position);
        if (kicktype) form.append('kick_type', kicktype);
        if (goals)    form.append('goals',    goals);

        setLoading(true);
        setStatus('Uploading & analysingâ€¦');
        document.getElementById('results').style.display = 'none';
        document.getElementById('results').innerHTML = '';
        setStep(3);

        let res, data;
        try {
          res  = await fetch(`${base}/feedback`, { method:'POST', body:form });
          data = await res.json();
        } catch (err) {
          setStatus(`Network error: ${err.message} â€” is the server running at ${base}?`, 'error');
          setLoading(false); setStep(2); return;
        }

        setLoading(false); setStep(4);

        if (!res.ok) {
          const detail = data && data.detail ? data.detail : JSON.stringify(data);
          setStatus(`Error ${res.status}: ${detail}`, 'error');
          const el = document.getElementById('results');
          el.style.display = 'block';
          el.innerHTML = `<div class="no-kick" style="border-color:var(--significant)"><h3 style="color:var(--significant)">Server Error ${res.status}</h3><p>${detail}</p></div>${rawSection(data)}`;
          return;
        }

        setStatus('âœ“ Analysis complete', 'success');
        renderResults(data);
      }

      // â”€â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      function renderResults(data) {
        const el = document.getElementById('results');
        el.style.display = 'block';

        if (data.status === 'no_kick_detected') {
          el.innerHTML = `<div class="no-kick"><h3>No Kick Detected</h3><p>The model couldn't find a kick. Make sure your kick is clearly visible and unobstructed.</p></div>${rawSection(data)}`;
          return;
        }

        const fb      = data.feedback   || {};
        const devs    = data.deviations || [];
        const profile = data.profile_used || {};

        el.innerHTML = `
          ${profileBanner(profile)}
          ${ratingHero(fb, data.frame_number)}
          <p class="section-label anim-d1">Metrics vs ${profile.key || 'Pro Reference'}</p>
          <div class="dev-grid anim-d2">${devs.map(devCard).join('')}</div>
          ${strengthsAndImprovements(fb)}
          ${drillsSection(fb.drills || [])}
          ${rawSection(data)}`;

        el.scrollIntoView({ behavior:'smooth', block:'start' });
      }

      function profileBanner(p) {
        if (!p.key) return '';
        return `<div class="profile-used-banner"><span class="pu-icon">ðŸŽ¯</span><div><div class="profile-used-label">Benchmark: ${p.key}</div><div class="profile-used-desc">${p.description || ''}</div></div></div>`;
      }

      function ratingHero(fb, frameNum) {
        const r = fb.overall_rating ?? 0;
        const pct = Math.round(r / 10 * 100);
        return `
          <div class="rating-hero" style="--pct:${pct}">
            <div class="rating-circle-wrap">
              <div class="rating-circle" style="--pct:${pct}">
                <div class="rating-inner">
                  <div class="rating-num">${r || 'â€”'}</div>
                  <div class="rating-denom">/10</div>
                </div>
              </div>
            </div>
            <div class="rating-text">
              <h2>${scoreLabel(fb.overall_rating)}</h2>
              <p>${fb.summary || 'No summary available.'}</p>
              ${fb.pro_tip ? `<div class="pro-tip">"${fb.pro_tip}"</div>` : ''}
              ${fb.next_session_focus ? `<div class="next-focus"><span class="next-focus-label">Next session</span><span>${fb.next_session_focus}</span></div>` : ''}
            </div>
          </div>
          <span class="frame-badge">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M7 2v20M17 2v20M2 12h20"/></svg>
            Kick detected at frame ${frameNum ?? '?'}
          </span>`;
      }

      function devCard(d) {
        const sev = d.severity || 'unavailable';
        let diffLine = '';
        if (d.pct_diff !== null && d.pct_diff !== undefined && d.direction !== 'matches_pro') {
          const pct = (Math.abs(d.pct_diff)*100).toFixed(1);
          const cls = d.direction === 'above_pro' ? 'diff-above' : 'diff-below';
          diffLine = `<div class="dev-diff ${cls}">${d.direction==='above_pro'?'â†‘':'â†“'} ${pct}% vs reference</div>`;
        } else if (d.direction === 'matches_pro') {
          diffLine = `<div class="dev-diff diff-match">âœ“ Matches reference</div>`;
        }
        const cue = d.coaching_cue ? `<div class="dev-cue">"${escHTML(d.coaching_cue)}"</div>` : '';
        return `
          <div class="dev-card ${sev}" title="${escHTML(d.hint||'')}">
            <div class="dev-card-accent"></div>
            <div class="dev-label">${d.label||d.feature}</div>
            <div class="dev-values"><span class="dev-user">${d.user_value!=null?fmt(d.user_value):'â€”'}</span><span class="dev-unit">${d.unit}</span></div>
            <div class="dev-pro-row">Ref: ${fmt(d.pro_value)} ${d.unit}</div>
            ${diffLine}
            <span class="dev-badge badge-${sev}">${sev}</span>
            ${cue}
          </div>`;
      }

      function strengthsAndImprovements(fb) {
        const strengths = fb.strengths || [];
        const improve   = fb.areas_to_improve || [];
        const strHTML = strengths.length
          ? strengths.map(s=>`<li><span class="li-dot"></span><span>${s}</span></li>`).join('')
          : `<li><span class="li-dot"></span><span style="color:var(--muted)">None listed</span></li>`;
        const impHTML = improve.length
          ? improve.map(a => {
              const sc = a.severity==='significant'?'badge-significant':a.severity==='moderate'?'badge-moderate':'badge-good';
              const cue = a.coaching_cue ? `<div class="improve-cue">"${escHTML(a.coaching_cue)}"</div>` : '';
              return `<li><div><span class="improve-sev dev-badge ${sc}">${a.severity||''}</span></div><div><strong style="color:var(--text);font-size:13px">${a.area||''}</strong><br><span style="color:var(--muted);font-size:12.5px">${a.explanation||''}</span>${cue}</div></li>`;
            }).join('')
          : `<li><span class="li-dot"></span><span style="color:var(--muted)">No issues â€” elite technique!</span></li>`;
        return `
          <div class="two-col anim-d3">
            <div class="list-card"><h3><span class="h3-icon good">âœ¦</span>Strengths</h3><ul>${strHTML}</ul></div>
            <div class="list-card"><h3><span class="h3-icon significant">âš¡</span>Areas to Improve</h3><ul>${impHTML}</ul></div>
          </div>`;
      }

      function drillsSection(drills) {
        const header = `<p class="section-label anim-d4">Personalised Drills</p>`;
        if (!drills.length) return header + `<div class="empty-drills">No drills recommended â€” you're already at an elite level!</div>`;
        return header + `<div class="drills-list">${drills.map((d,i)=>`
          <div class="drill-card" style="animation-delay:${0.28+i*0.07}s">
            <div class="drill-num">0${i+1}</div>
            <div class="drill-body">
              <h4>${d.name||'Drill'}</h4>
              <p>${d.description||''}</p>
              <div class="drill-meta">
                <div class="drill-reps">${d.sets_reps||''}</div>
                <div class="drill-tags">${(d.targets||[]).map(t=>`<span class="drill-tag">${t}</span>`).join('')}</div>
              </div>
              ${d.progression?`<div class="drill-progression"><span class="drill-prog-label">Progress â†—</span><span>${d.progression}</span></div>`:''}
            </div>
          </div>`).join('')}</div>`;
      }

      // â”€â”€â”€ HISTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      async function openHistory() {
        document.getElementById('history-panel').classList.add('open');
        const base = (document.getElementById('api-base').value || 'http://127.0.0.1:8000/').replace(/\/$/, '');
        const listEl = document.getElementById('history-list');
        listEl.innerHTML = '<div class="history-empty">Loadingâ€¦</div>';
        try {
          const res  = await fetch(`${base}/history?limit=30`);
          const data = await res.json();
          const sessions = (data.sessions || []).reverse();
          if (!sessions.length) {
            listEl.innerHTML = '<div class="history-empty">No sessions recorded yet.<br>Analyse a kick to start tracking your progress!</div>';
            return;
          }
          listEl.innerHTML = sessions.map((s,i) => `
            <div class="history-session">
              <div class="hs-row">
                <div class="hs-rating">${s.overall_rating||'â€”'}<span style="font-size:1rem;color:var(--muted)">/10</span></div>
                <div class="hs-meta">Session ${sessions.length-i}</div>
              </div>
              <div class="hs-profile">${s.profile||'Standard'} Â· ${s.position||'Unspecified'} Â· ${s.level||''}</div>
              <div class="hs-meta" style="margin-top:6px">Knee: ${parseFloat(s.knee_angle||0).toFixed(1)}Â°</div>
            </div>`).join('');
        } catch(e) {
          listEl.innerHTML = '<div class="history-empty">Could not load history.<br>Make sure the server is running.</div>';
        }
      }

      function closeHistory() { document.getElementById('history-panel').classList.remove('open'); }

      // â”€â”€â”€ RAW JSON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      function rawSection(data) {
        return `<button class="raw-toggle" onclick="toggleRaw(this)">Show raw JSON â–¾</button><pre id="raw-output">${escHTML(JSON.stringify(data,null,2))}</pre>`;
      }
      function toggleRaw(btn) {
        const pre = document.getElementById('raw-output');
        const open = pre.style.display === 'block';
        pre.style.display = open ? 'none' : 'block';
        btn.textContent = open ? 'Show raw JSON â–¾' : 'Hide raw JSON â–´';
      }

      // â”€â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      function fmt(v) { if (v===null||v===undefined) return 'â€”'; const n=parseFloat(v); return isNaN(n)?v:(Math.abs(n)>=100?n.toFixed(1):n.toFixed(2)); }
      function scoreLabel(r) { if(r>=9)return'Elite Technique'; if(r>=7)return'Strong Kick'; if(r>=5)return'Developing Kick'; if(r>=3)return'Needs Work'; return'Early Stage'; }
      function escHTML(s) { return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
    </script>
  </body>
</html>